language: go

before_install:
  - wget http://apache.claz.org/zookeeper/zookeeper-3.4.6/zookeeper-3.4.6.tar.gz
  - tar -zxvf zookeeper*tar.gz
  - wget https://releases.hashicorp.com/consul/0.9.3/consul_0.9.3_linux_amd64.zip?_ga=2.214371295.97069421.1504961822-580552568.1501916240
  - unzip consul_0.9.3_linux_amd64* -d consul
  - export PATH=`pwd`/consul:$PATH
  - echo $PATH

branches:
  only:
    - master

install:
  - go get -u github.com/go-ini/ini
#  - go get -u github.com/gopherjs/gopherjs
  - go get -u github.com/hashicorp/consul
#  - go get -u github.com/hashicorp/go-cleanhttp
#  - go get -u github.com/hashicorp/go-rootcerts
#  - go get -u github.com/hashicorp/serf
  - go get -u github.com/jtolds/gls
  - go get -u github.com/mattn/go-colorable
  - go get -u github.com/mattn/go-isatty
  - go get -u github.com/mgutz/ansi
  - go get -u github.com/mitchellh/go-homedir
  - go get -u github.com/samuel/go-zookeeper/zk ...
  - go get -u github.com/sirupsen/logrus
  - go get -u github.com/smartystreets/assertions
  - go get -u github.com/smartystreets/goconvey
  - go get -u github.com/tietang/go-utils
  - go get -u github.com/valyala/bytebufferpool
  - go get -u github.com/valyala/fasttemplate
  - go get -u github.com/mattn/goveralls
#  - go get -u golang.org/x/crypto ...
#  - go get -u golang.org/x/sys ...

script:
  - echo $COVERALLS_TOKEN
  - go test -race -v -covermode=count -coverprofile=coverage.out
  - (go env GOPATH | awk 'BEGIN{FS=":"} {print $1}')/bin/goveralls -coverprofile=coverage.out -service=travis-ci -repotoken $COVERALLS_TOKEN

go:
  - 1.8.x

env:
  - secure: "DgTi4PC+GXhhaxZazRx/mCM8cjhUo3cKlorEdX/Ss+NyiSOLnOHxoHYdJdcYceh+nJPh8MRyCGhtIJv28GXonK49sz7pHeY1cTduKDdGFWLaw7uYPNeEz3x5/jev91is5NO+UbwmWXTe6Au00dlWCjeuTy5NlWq5Js9WRRP2P1NjKtP1jOEtm8wFABX1XMP96OoP/LRQOoSKaHK2FCxBG2WCTm5V0pfIB2KM0fs/h7NRmirNw0sFJJfkLpcmQkT7s2l10ljTTDgVbtgO0JsbLAmvAR5WkJqJy+TB6zfBmFanuun51NZcFEH+ZPNcfOmRDyuJ042mMdo9Rrpsg/lETvHp0KunK1czZVjyid3af8gSmMjWBIeakeyxTv+sjcEMAhsPSt+nzTdZy9dTr+8Bn38LiZmm+47LVqpITehQ7P1G8zZGLnqLlZnTUbzv8XeAaFSXSwcturrtr4XVZJQa3RMia53UhLoeq4/ZnesGVNtIJBa7OsKgzOUDYyArEdeI9YnA0MXE+UD+eBEFBoBd2+2WGw+3ClNBQK1a0dPaT13OE1FsfxYllntC4ICOF7SOqh1UIWW0lTjgZDnp+ZrY5ROFtATmsa0sJHVbvABN5sFsMYND86X/csICO9KIsnYMyAit50390zzUgZtaQQoLwc8yk8q7AqRcNU18khL06h0="

